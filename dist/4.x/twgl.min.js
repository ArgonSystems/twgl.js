/*!
 * @license twgl.js 4.2.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.twgl=r():e.twgl=r()}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var t={};return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=5)}([function(e,r,t){"use strict";function n(e,r,t){e.forEach(function(e){var n=r[e];void 0!==n&&(t[e]=n)})}function o(e,r){Object.keys(r).forEach(function(t){r.hasOwnProperty(t)&&e.hasOwnProperty(t)&&(r[t]=e[t])})}Object.defineProperty(r,"__esModule",{value:!0});var a=window.console&&window.console.error&&"function"==typeof window.console.error?window.console.error.bind(window.console):function(){},i=window.console&&window.console.warn&&"function"==typeof window.console.warn?window.console.warn.bind(window.console):function(){};r.copyExistingProperties=o,r.copyNamedProperties=n,r.error=a,r.warn=i},function(e,r,t){"use strict";function n(e){if(e instanceof Int8Array)return i;if(e instanceof Uint8Array)return u;if(e instanceof Uint8ClampedArray)return u;if(e instanceof Int16Array)return f;if(e instanceof Uint16Array)return l;if(e instanceof Int32Array)return s;if(e instanceof Uint32Array)return c;if(e instanceof Float32Array)return m;throw"unsupported typed array type"}function o(e){if(e===Int8Array)return i;if(e===Uint8Array)return u;if(e===Uint8ClampedArray)return u;if(e===Int16Array)return f;if(e===Uint16Array)return l;if(e===Int32Array)return s;if(e===Uint32Array)return c;if(e===Float32Array)return m;throw"unsupported typed array type"}function a(e){var r=d[e];if(!r)throw"unknown gl type";return r}Object.defineProperty(r,"__esModule",{value:!0});var i=5120,u=5121,f=5122,l=5123,s=5124,c=5125,m=5126,d={},y=d;y[i]=Int8Array,y[u]=Uint8Array,y[f]=Int16Array,y[l]=Uint16Array,y[s]=Int32Array,y[c]=Uint32Array,y[m]=Float32Array,y[32819]=Uint16Array,y[32820]=Uint16Array,y[33635]=Uint16Array,y[5131]=Uint16Array,y[33640]=Uint32Array,y[35899]=Uint32Array,y[35902]=Uint32Array,y[36269]=Uint32Array,y[34042]=Uint32Array;var b=window.SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof window.SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};r.getGLTypeForTypedArray=n,r.getGLTypeForTypedArrayType=o,r.getTypedArrayTypeForGLType=a,r.isArrayBuffer=b},function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function o(e,r){return de[r].bindPoint}function a(e,r){return function(t){e.uniform1f(r,t)}}function i(e,r){return function(t){e.uniform1fv(r,t)}}function u(e,r){return function(t){e.uniform2fv(r,t)}}function f(e,r){return function(t){e.uniform3fv(r,t)}}function l(e,r){return function(t){e.uniform4fv(r,t)}}function s(e,r){return function(t){e.uniform1i(r,t)}}function c(e,r){return function(t){e.uniform1iv(r,t)}}function m(e,r){return function(t){e.uniform2iv(r,t)}}function d(e,r){return function(t){e.uniform3iv(r,t)}}function y(e,r){return function(t){e.uniform4iv(r,t)}}function b(e,r){return function(t){e.uniform1ui(r,t)}}function E(e,r){return function(t){e.uniform1uiv(r,t)}}function p(e,r){return function(t){e.uniform2uiv(r,t)}}function v(e,r){return function(t){e.uniform3uiv(r,t)}}function _(e,r){return function(t){e.uniform4uiv(r,t)}}function T(e,r){return function(t){e.uniformMatrix2fv(r,!1,t)}}function A(e,r){return function(t){e.uniformMatrix3fv(r,!1,t)}}function x(e,r){return function(t){e.uniformMatrix4fv(r,!1,t)}}function F(e,r){return function(t){e.uniformMatrix2x3fv(r,!1,t)}}function R(e,r){return function(t){e.uniformMatrix3x2fv(r,!1,t)}}function g(e,r){return function(t){e.uniformMatrix2x4fv(r,!1,t)}}function h(e,r){return function(t){e.uniformMatrix4x2fv(r,!1,t)}}function P(e,r){return function(t){e.uniformMatrix3x4fv(r,!1,t)}}function U(e,r){return function(t){e.uniformMatrix4x3fv(r,!1,t)}}function B(e,r,t,n){var a=o(e,r);return fe.isWebGL2(e)?function(r){var o=void 0,i=void 0;r instanceof WebGLTexture?(o=r,i=null):(o=r.texture,i=r.sampler),e.uniform1i(n,t),e.activeTexture(e.TEXTURE0+t),e.bindTexture(a,o),e.bindSampler(t,i)}:function(r){e.uniform1i(n,t),e.activeTexture(e.TEXTURE0+t),e.bindTexture(a,r)}}function w(e,r,t,n,a){for(var i=o(e,r),u=new Int32Array(a),f=0;f<a;++f)u[f]=t+f;return fe.isWebGL2(e)?function(r){e.uniform1iv(n,u),r.forEach(function(r,n){e.activeTexture(e.TEXTURE0+u[n]);var o=void 0,a=void 0;r instanceof WebGLTexture?(o=r,a=null):(o=r.texture,a=r.sampler),e.bindSampler(t,a),e.bindTexture(i,o)})}:function(r){e.uniform1iv(n,u),r.forEach(function(r,t){e.activeTexture(e.TEXTURE0+u[t]),e.bindTexture(i,r)})}}function I(e,r){return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,t.numComponents||t.size,t.type||e.FLOAT,t.normalize||!1,t.stride||0,t.offset||0),void 0!==t.divisor&&e.vertexAttribDivisor(r,t.divisor)}}function S(e,r){return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribIPointer(r,t.numComponents||t.size,t.type||e.INT,t.stride||0,t.offset||0),void 0!==t.divisor&&e.vertexAttribDivisor(r,t.divisor)}}function O(e,r,t){var n=t.size,o=t.count;return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer);for(var a=t.size||t.numComponents||n,i=a/o,u=t.type||e.FLOAT,f=de[u],l=f.size*a,s=t.normalize||!1,c=t.offset||0,m=l/o,d=0;d<o;++d)e.enableVertexAttribArray(r+d),e.vertexAttribPointer(r+d,i,u,s,l,c+m*d),void 0!==t.divisor&&e.vertexAttribDivisor(r+d,t.divisor)}}function C(e,r){return r=r||0,++r,e.split("\n").map(function(e,t){return t+r+": "+e}).join("\n")}function L(e,r,t,n){var o=n||ce,a=e.createShader(t),i=0;if(Ee.test(r)&&(i=1,r=r.replace(Ee,"")),e.shaderSource(a,r),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS)){var u=e.getShaderInfoLog(a);return o(C(r,i)+"\n*** Error compiling shader: "+u),e.deleteShader(a),null}return a}function M(e,r,t){var n=void 0;if("function"==typeof r&&(t=r,r=void 0),"function"==typeof e)t=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;var o=e;t=o.errorCallback,e=o.attribLocations,n=o.transformFeedbackVaryings}var a={errorCallback:t||ce,transformFeedbackVaryings:n};if(e){var i={};Array.isArray(e)?e.forEach(function(e,t){i[e]=r?r[t]:t}):i=e,a.attribLocations=i}return a}function D(e){return e.indexOf("frag")>=0?be.FRAGMENT_SHADER:e.indexOf("vert")>=0?be.VERTEX_SHADER:void 0}function N(e,r){r.forEach(function(r){e.deleteShader(r)})}function z(e,r,t,n,o){for(var a=M(t,n,o),i=[],u=[],f=0;f<r.length;++f){var l=r[f];if("string"==typeof l){var s=document.getElementById(l),c=s?s.text:l,m=e[pe[f]];s&&s.type&&(m=D(s.type)||m),l=L(e,c,m,a.errorCallback),u.push(l)}l instanceof WebGLShader&&i.push(l)}if(i.length!==r.length)return a.errorCallback("not enough shaders for program"),N(e,u),null;var d=e.createProgram();i.forEach(function(r){e.attachShader(d,r)}),a.attribLocations&&Object.keys(a.attribLocations).forEach(function(r){e.bindAttribLocation(d,a.attribLocations[r],r)});var y=a.transformFeedbackVaryings;if(y&&(y.attribs&&(y=y.attribs),Array.isArray(y)||(y=Object.keys(y)),e.transformFeedbackVaryings(d,y,a.transformFeedbackMode||e.SEPARATE_ATTRIBS)),e.linkProgram(d),!e.getProgramParameter(d,e.LINK_STATUS)){var b=e.getProgramInfoLog(d);return a.errorCallback("Error in program linking:"+b),e.deleteProgram(d),N(e,u),null}return d}function k(e,r,t,n){var o="",a=document.getElementById(r);if(!a)throw"*** Error: unknown script element"+r;o=a.text;var i=t||D(a.type);if(!i)throw"*** Error: unknown shader type";return L(e,o,i,n)}function G(e,r,t,n,o){for(var a=M(t,n,o),i=[],u=0;u<r.length;++u){var f=k(e,r[u],e[pe[u]],a.errorCallback);if(!f)return null;i.push(f)}return z(e,i,a)}function X(e,r,t,n,o){for(var a=M(t,n,o),i=[],u=0;u<r.length;++u){var f=L(e,r[u],e[pe[u]],a.errorCallback);if(!f)return null;i.push(f)}return z(e,i,a)}function j(e){var r=e.name;return r.startsWith("gl_")||r.startsWith("webgl_")}function W(e,r){for(var t=0,n={},o=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),a=0;a<o;++a){var i=e.getActiveUniform(r,a);if(!j(i)){var u=i.name;"[0]"===u.substr(-3)&&(u=u.substr(0,u.length-3));var f=function(r,n){var o=e.getUniformLocation(r,n.name),a=n.size>1&&"[0]"===n.name.substr(-3),i=n.type,u=de[i];if(!u)throw"unknown type: 0x"+i.toString(16);var f=void 0;if(u.bindPoint){var l=t;t+=n.size,f=a?u.arraySetter(e,i,l,o,n.size):u.setter(e,i,l,o,n.size)}else f=u.arraySetter&&a?u.arraySetter(e,o):u.setter(e,o);return f.location=o,f}(r,i);n[u]=f}}return n}function Y(e,r){for(var t={},n=e.getProgramParameter(r,e.TRANSFORM_FEEDBACK_VARYINGS),o=0;o<n;++o){var a=e.getTransformFeedbackVarying(r,o);t[a.name]={index:o,type:a.type,size:a.size}}return t}function V(e,r,t){r.transformFeedbackInfo&&(r=r.transformFeedbackInfo),t.attribs&&(t=t.attribs);for(var n in t){var o=r[n];if(o){var a=t[n];a.offset?e.bindBufferRange(e.TRANSFORM_FEEDBACK_BUFFER,o.index,a.buffer,a.offset,a.size):e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o.index,a.buffer)}}}function K(e,r,t){r.transformFeedbackInfo&&(r=r.transformFeedbackInfo),t.attribs&&(t=t.attribs);for(var n in t){var o=r[n];o&&e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o.index,null)}}function H(e,r,t){var n=e.createTransformFeedback();return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n),e.useProgram(r.program),V(e,r,t),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),K(e,r,t),n}function Z(e,r){for(var t=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),n=[],o=[],a=0;a<t;++a){o.push(a),n.push({});var i=e.getActiveUniform(r,a);if(j(i))break;n[a].name=i.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(t){var a=t[0],i=t[1];e.getActiveUniforms(r,o,e[a]).forEach(function(e,r){n[r][i]=e})});for(var u={},f=e.getProgramParameter(r,e.ACTIVE_UNIFORM_BLOCKS),l=0;l<f;++l){var s=e.getActiveUniformBlockName(r,l),c={index:l,usedByVertexShader:e.getActiveUniformBlockParameter(r,l,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(r,l,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(r,l,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(r,l,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};c.used=c.usedByVertexSahder||c.usedByFragmentShader,u[s]=c}return{blockSpecs:u,uniformData:n}}function q(e,r,t,n){var o=t.blockSpecs,a=t.uniformData,i=o[n];if(!i)return me("no uniform block object named:",n),{name:n,uniforms:{}};var u=new ArrayBuffer(i.size),f=e.createBuffer(),l=i.index;e.bindBuffer(e.UNIFORM_BUFFER,f),e.uniformBlockBinding(r,i.index,l);var s=n+".";ve.test(s)&&(s=s.replace(ve,"."));var c={};return i.uniformIndices.forEach(function(e){var r=a[e],t=de[r.type],n=t.Type,o=r.size*t.size,i=r.name;i.substr(0,s.length)===s&&(i=i.substr(s.length)),c[i]=new n(u,r.offset,o/n.BYTES_PER_ELEMENT)}),{name:n,array:u,asFloat:new Float32Array(u),buffer:f,uniforms:c}}function $(e,r,t){return q(e,r.program,r.uniformBlockSpec,t)}function J(e,r,t){var n=r.uniformBlockSpec||r,o=n.blockSpecs[t.name];if(o){var a=o.index;return e.bindBufferRange(e.UNIFORM_BUFFER,a,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function Q(e,r,t){J(e,r,t)&&e.bufferData(e.UNIFORM_BUFFER,t.array,e.DYNAMIC_DRAW)}function ee(e,r){var t=e.uniforms;for(var n in r){var o=t[n];if(o){var a=r[n];a.length?o.set(a):o[0]=a}}}function re(e,r){for(var t=e.uniformSetters||e,n=arguments.length,o=1;o<n;++o){var a=arguments[o];if(Array.isArray(a))for(var i=a.length,u=0;u<i;++u)re(t,a[u]);else for(var f in a){var l=t[f];l&&l(a[f])}}}function te(e,r){for(var t={},n=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES),o=0;o<n;++o){var a=e.getActiveAttrib(r,o);if(!j(a)){var i=e.getAttribLocation(r,a.name),u=ye[a.type],f=u.setter(e,i,u);f.location=i,t[a.name]=f}}return t}function ne(e,r){for(var t in r){var n=e[t];n&&n(r[t])}}function oe(e,r,t){t.vertexArrayObject?e.bindVertexArray(t.vertexArrayObject):(ne(r.attribSetters||r,t.attribs),t.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indices))}function ae(e,r){var t=W(e,r),n=te(e,r),o={program:r,uniformSetters:t,attribSetters:n};return fe.isWebGL2(e)&&(o.uniformBlockSpec=Z(e,r),o.transformFeedbackInfo=Y(e,r)),o}function ie(e,r,t,n,o){var a=M(t,n,o),i=!0;if(r=r.map(function(e){if(e.indexOf("\n")<0){var r=document.getElementById(e);r?e=r.text:(a.errorCallback("no element with id: "+e),i=!1)}return e}),!i)return null;var u=X(e,r,a);return u?ae(e,u):null}Object.defineProperty(r,"__esModule",{value:!0}),r.bindUniformBlock=r.setBlockUniforms=r.setUniformBlock=r.setUniforms=r.setBuffersAndAttributes=r.setAttributes=r.bindTransformFeedbackInfo=r.createTransformFeedbackInfo=r.createTransformFeedback=r.createUniformBlockInfo=r.createUniformBlockInfoFromProgram=r.createUniformBlockSpecFromProgram=r.createUniformSetters=r.createProgramInfoFromProgram=r.createProgramInfo=r.createProgramFromSources=r.createProgramFromScripts=r.createProgram=r.createAttributeSetters=void 0;var ue=t(3),fe=n(ue),le=t(0),se=n(le),ce=se.error,me=se.warn,de={};de[5126]={Type:Float32Array,size:4,setter:a,arraySetter:i},de[35664]={Type:Float32Array,size:8,setter:u},de[35665]={Type:Float32Array,size:12,setter:f},de[35666]={Type:Float32Array,size:16,setter:l},de[5124]={Type:Int32Array,size:4,setter:s,arraySetter:c},de[35667]={Type:Int32Array,size:8,setter:m},de[35668]={Type:Int32Array,size:12,setter:d},de[35669]={Type:Int32Array,size:16,setter:y},de[5125]={Type:Uint32Array,size:4,setter:b,arraySetter:E},de[36294]={Type:Uint32Array,size:8,setter:p},de[36295]={Type:Uint32Array,size:12,setter:v},de[36296]={Type:Uint32Array,size:16,setter:_},de[35670]={Type:Uint32Array,size:4,setter:s,arraySetter:c},de[35671]={Type:Uint32Array,size:8,setter:m},de[35672]={Type:Uint32Array,size:12,setter:d},de[35673]={Type:Uint32Array,size:16,setter:y},de[35674]={Type:Float32Array,size:16,setter:T},de[35675]={Type:Float32Array,size:36,setter:A},de[35676]={Type:Float32Array,size:64,setter:x},de[35685]={Type:Float32Array,size:24,setter:F},de[35686]={Type:Float32Array,size:32,setter:g},de[35687]={Type:Float32Array,size:24,setter:R},de[35688]={Type:Float32Array,size:48,setter:P},de[35689]={Type:Float32Array,size:32,setter:h},de[35690]={Type:Float32Array,size:48,setter:U},de[35678]={Type:null,size:0,setter:B,arraySetter:w,bindPoint:3553},de[35680]={Type:null,size:0,setter:B,arraySetter:w,bindPoint:34067},de[35679]={Type:null,size:0,setter:B,arraySetter:w,bindPoint:32879},de[35682]={Type:null,size:0,setter:B,arraySetter:w,bindPoint:3553},de[36289]={Type:null,size:0,setter:B,arraySetter:w,bindPoint:35866},de[36292]={Type:null,size:0,setter:B,arraySetter:w,bindPoint:35866},de[36293]={Type:null,size:0,setter:B,arraySetter:w,bindPoint:34067},de[36298]={Type:null,size:0,setter:B,arraySetter:w,bindPoint:3553},de[36299]={Type:null,size:0,setter:B,arraySetter:w,bindPoint:32879},de[36300]={Type:null,size:0,setter:B,arraySetter:w,bindPoint:34067},de[36303]={Type:null,size:0,setter:B,arraySetter:w,bindPoint:35866},de[36306]={Type:null,size:0,setter:B,arraySetter:w,bindPoint:3553},de[36307]={Type:null,size:0,setter:B,arraySetter:w,bindPoint:32879},de[36308]={Type:null,size:0,setter:B,arraySetter:w,bindPoint:34067},de[36311]={Type:null,size:0,setter:B,arraySetter:w,bindPoint:35866};var ye={};ye[5126]={size:4,setter:I},ye[35664]={size:8,setter:I},ye[35665]={size:12,setter:I},ye[35666]={size:16,setter:I},ye[5124]={size:4,setter:S},ye[35667]={size:8,setter:S},ye[35668]={size:12,setter:S},ye[35669]={size:16,setter:S},ye[5125]={size:4,setter:S},ye[36294]={size:8,setter:S},ye[36295]={size:12,setter:S},ye[36296]={size:16,setter:S},ye[35670]={size:4,setter:S},ye[35671]={size:8,setter:S},ye[35672]={size:12,setter:S},ye[35673]={size:16,setter:S},ye[35674]={size:4,setter:O,count:2},ye[35675]={size:9,setter:O,count:3},ye[35676]={size:16,setter:O,count:4};var be=void 0,Ee=/^[ \t]*\n/,pe=["VERTEX_SHADER","FRAGMENT_SHADER"],ve=/\[\d+\]\.$/;r.createAttributeSetters=te,r.createProgram=z,r.createProgramFromScripts=G,r.createProgramFromSources=X,r.createProgramInfo=ie,r.createProgramInfoFromProgram=ae,r.createUniformSetters=W,r.createUniformBlockSpecFromProgram=Z,r.createUniformBlockInfoFromProgram=q,r.createUniformBlockInfo=$,r.createTransformFeedback=H,r.createTransformFeedbackInfo=Y,r.bindTransformFeedbackInfo=V,r.setAttributes=ne,r.setBuffersAndAttributes=oe,r.setUniforms=re,r.setUniformBlock=Q,r.setBlockUniforms=ee,r.bindUniformBlock=J},function(e,r,t){"use strict";function n(e){return!!e.texStorage2D}function o(e){return!e.texStorage2D}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e){var n=e.constructor.name;if(!r[n]){for(var o in e)if("number"==typeof e[o]){var a=t[e[o]];t[e[o]]=a?a+" | "+o:o}r[n]=!0}}var r={},t={};return function(r,n){return e(r),t[n]||"0x"+n.toString(16)}}();r.glEnumToString=a,r.isWebGL1=o,r.isWebGL2=n},function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function o(e,r){var t=J[e];if(!t)throw"unknown internal format";var n=t.bytesPerElementMap[r];if(void 0===n)throw"unknown internal format";return n}function a(e){var r=J[e];if(!r)throw"unknown internal format";return{format:r.e,type:Array.isArray(r.type)?r.type[0]:r.type}}function i(e){return 0==(e&e-1)}function u(e,r,t,n){if(!k.isWebGL2(e))return i(r)&&i(t);var o=J[n];if(!o)throw"unknown internal format";return o.r&&o.t}function f(e){var r=J[e];if(!r)throw"unknown internal format";return r.t}function l(e){var r=q[e];if(!r)throw"unknown format: "+e;return r.a}function s(e,r,t){return V(r)?X.getGLTypeForTypedArray(r):t||e.UNSIGNED_BYTE}function c(e,r,t,n,o){if(o%1!=0)throw"can't guess dimensions";if(t||n){if(n){if(!t&&(t=o/n)%1)throw"can't guess dimensions"}else if((n=o/t)%1)throw"can't guess dimensions"}else{var a=Math.sqrt(o/(r===e.TEXTURE_CUBE_MAP?6:1));a%1==0?(t=a,n=a):(t=o,n=1)}return{width:t,height:n}}function m(e){Y.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function d(e){W.copyExistingProperties(e,Y),e.textureColor&&m(e.textureColor)}function y(e,r){void 0!==r.colorspaceConversion&&(ee.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.colorspaceConversion)),void 0!==r.premultiplyAlpha&&(ee.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha)),void 0!==r.flipY&&(ee.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY))}function b(e,r){void 0!==r.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,ee.colorspaceConversion),void 0!==r.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),void 0!==r.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,ee.flipY)}function E(e,r,t,n){n.minMag&&(t.call(e,r,e.TEXTURE_MIN_FILTER,n.minMag),t.call(e,r,e.TEXTURE_MAG_FILTER,n.minMag)),n.min&&t.call(e,r,e.TEXTURE_MIN_FILTER,n.min),n.mag&&t.call(e,r,e.TEXTURE_MAG_FILTER,n.mag),n.wrap&&(t.call(e,r,e.TEXTURE_WRAP_S,n.wrap),t.call(e,r,e.TEXTURE_WRAP_T,n.wrap),(r===e.TEXTURE_3D||r instanceof re)&&t.call(e,r,e.TEXTURE_WRAP_R,n.wrap)),n.wrapR&&t.call(e,r,e.TEXTURE_WRAP_R,n.wrapR),n.wrapS&&t.call(e,r,e.TEXTURE_WRAP_S,n.wrapS),n.wrapT&&t.call(e,r,e.TEXTURE_WRAP_T,n.wrapT),n.minLod&&t.call(e,r,e.TEXTURE_MIN_LOD,n.minLod),n.maxLod&&t.call(e,r,e.TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&t.call(e,r,e.TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&t.call(e,r,e.TEXTURE_MAX_LEVEL,n.maxLevel)}function p(e,r,t){var n=t.target||e.TEXTURE_2D;e.bindTexture(n,r),E(e,n,e.texParameteri,t)}function v(e,r,t){E(e,r,e.samplerParameteri,t)}function _(e,r){var t=e.createSampler();return v(e,t,r),t}function T(e,r){var t={};return Object.keys(r).forEach(function(n){t[n]=_(e,r[n])}),t}function A(e){return e=e||Y.textureColor,V(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function x(e,r,t,n,o,a,i){t=t||Y.textureOptions,a=a||e.RGBA,i=i||e.UNSIGNED_BYTE;var l=t.target||e.TEXTURE_2D;if(n=n||t.width,o=o||t.height,e.bindTexture(l,r),u(e,n,o,a,i))e.generateMipmap(l);else{var s=f(a,i)?e.LINEAR:e.NEAREST;e.texParameteri(l,e.TEXTURE_MIN_FILTER,s),e.texParameteri(l,e.TEXTURE_MAG_FILTER,s),e.texParameteri(l,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(l,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}}function F(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function R(e,r){return r=r||{},r.cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function g(e,r){var t=R(e,r),n=t.map(function(e,r){return{face:e,ndx:r}});return n.sort(function(e,r){return e.face-r.face}),n}function h(e,r,t,n){n=n||Y.textureOptions;var o=n.target||e.TEXTURE_2D,i=n.level||0,u=t.width,f=t.height,l=n.internalFormat||n.format||e.RGBA,s=a(l),c=n.format||s.format,m=n.type||s.type;if(y(e,n),e.bindTexture(o,r),o===e.TEXTURE_CUBE_MAP){var d=t.width,E=t.height,v=void 0,_=void 0;if(d/6===E)v=E,_=[0,0,1,0,2,0,3,0,4,0,5,0];else if(E/6===d)v=d,_=[0,0,0,1,0,2,0,3,0,4,0,5];else if(d/3==E/2)v=d/3,_=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(d/2!=E/3)throw"can't figure out cube map from element: "+(t.src?t.src:t.nodeName);v=d/2,_=[0,0,1,0,0,1,1,1,0,2,1,2]}K.canvas.width=v,K.canvas.height=v,u=v,f=v,g(e,n).forEach(function(r){var n=_[2*r.ndx+0]*v,o=_[2*r.ndx+1]*v;K.drawImage(t,n,o,v,v,0,0,v,v),e.texImage2D(r.face,i,l,c,m,K.canvas)}),K.canvas.width=1,K.canvas.height=1}else if(o===e.TEXTURE_3D){var T=Math.min(t.width,t.height),A=Math.max(t.width,t.height),R=A/T;if(R%1!=0)throw"can not compute 3D dimensions of element";var h=t.width===A?1:0,P=t.height===A?1:0;e.texImage3D(o,i,l,T,T,T,0,c,m,null),K.canvas.width=T,K.canvas.height=T;for(var U=0;U<R;++U){var B=U*T*h,w=U*T*P,I=T,S=T,O=T,C=T;K.drawImage(t,B,w,I,S,0,0,O,C),e.texSubImage3D(o,i,0,0,U,T,T,1,c,m,K.canvas)}K.canvas.width=0,K.canvas.height=0,e.pixelStorei(e.UNPACK_SKIP_PIXELS,0)}else e.texImage2D(o,i,l,c,m,t);b(e,n),F(n)&&x(e,r,n,u,f,l,m),p(e,r,n)}function P(){}function U(e,r,t){function n(){i.removeEventListener("error",o),i.removeEventListener("load",a),i=null}function o(){var r="couldn't load image: "+e;W.error(r),t(r,i),n()}function a(){t(null,i),n()}t=t||P;var i=new Image;return r=void 0!==r?r:Y.crossOrigin,void 0!==r&&(i.crossOrigin=r),i.addEventListener("error",o),i.addEventListener("load",a),i.src=e,i}function B(e,r,t){t=t||Y.textureOptions;var n=t.target||e.TEXTURE_2D;if(e.bindTexture(n,r),!1!==t.color){var o=A(t.color);if(n===e.TEXTURE_CUBE_MAP)for(var a=0;a<6;++a)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);else n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o)}}function w(e,r,t,n){return n=n||P,t=t||Y.textureOptions,B(e,r,t),t=Object.assign({},t),U(t.src,t.crossOrigin,function(o,a){o?n(o,r,a):(h(e,r,a,t),n(null,r,a))})}function I(e,r,t,n){function o(o){return function(a,i){--d,a?E.push(a):i.width!==i.height?E.push("cubemap face img is not a square: "+i.src):(y(e,t),e.bindTexture(m,r),5===d?R(e).forEach(function(r){e.texImage2D(r,u,f,s,c,i)}):e.texImage2D(o,u,f,s,c,i),b(e,t),F(t)&&e.generateMipmap(m)),0===d&&n(E.length?E:void 0,v,r)}}n=n||P;var i=t.src;if(6!==i.length)throw"there must be 6 urls for a cubemap";var u=t.level||0,f=t.internalFormat||t.format||e.RGBA,l=a(f),s=t.format||l.format,c=t.type||e.UNSIGNED_BYTE,m=t.target||e.TEXTURE_2D;if(m!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";B(e,r,t),t=Object.assign({},t);var d=6,E=[],p=R(e,t),v=void 0;v=i.map(function(e,r){return U(e,t.crossOrigin,o(p[r]))})}function S(e,r,t,n){function o(o){return function(a,i){if(--m,a)d.push(a);else{if(y(e,t),e.bindTexture(c,r),A){A=!1,v=t.width||i.width,_=t.height||i.height,e.texImage3D(c,p,u,v,_,T,0,l,s,null);for(var f=0;f<T;++f)e.texSubImage3D(c,p,0,0,f,v,_,1,l,s,i)}else{var x=i;i.width===v&&i.height===_||(x=K.canvas,K.canvas.width=v,K.canvas.height=_,K.drawImage(i,0,0,v,_)),e.texSubImage3D(c,p,0,0,o,v,_,1,l,s,x),x===K.canvas&&(K.canvas.width=0,K.canvas.height=0)}b(e,t),F(t)&&e.generateMipmap(c)}0===m&&n(d.length?d:void 0,E,r)}}n=n||P;var i=t.src,u=t.internalFormat||t.format||e.RGBA,f=a(u),l=t.format||f.format,s=t.type||e.UNSIGNED_BYTE,c=t.target||e.TEXTURE_2D_ARRAY;if(c!==e.TEXTURE_3D&&c!==e.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";B(e,r,t),t=Object.assign({},t);var m=i.length,d=[],E=void 0,p=t.level||0,v=t.width,_=t.height,T=i.length,A=!0;E=i.map(function(e,r){return U(e,t.crossOrigin,o(r))})}function O(e,r,t,n){n=n||Y.textureOptions;var i=n.target||e.TEXTURE_2D;e.bindTexture(i,r);var u=n.width,f=n.height,l=n.depth,m=n.level||0,d=n.internalFormat||n.format||e.RGBA,E=a(d),p=n.format||E.format,v=n.type||s(e,t,E.type);if(V(t))t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));else{var _=X.getTypedArrayTypeForGLType(v);t=new _(t)}var T=o(d,v),A=t.byteLength/T;if(A%1)throw"length wrong size for format: "+k.glEnumToString(e,p);var x=void 0;if(i===e.TEXTURE_3D)if(u||f||l)!u||f&&l?!f||u&&l?(x=c(e,i,u,f,A/l),u=x.width,f=x.height):(x=c(e,i,u,l,A/f),u=x.width,l=x.height):(x=c(e,i,f,l,A/u),f=x.width,l=x.height);else{var F=Math.cbrt(A);if(F%1!=0)throw"can't guess cube size of array of numElements: "+A;u=F,f=F,l=F}else x=c(e,i,u,f,A),u=x.width,f=x.height;if(e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment||1),y(e,n),i===e.TEXTURE_CUBE_MAP){var R=T/t.BYTES_PER_ELEMENT,h=A/6*R;g(e,n).forEach(function(r){var n=h*r.ndx,o=t.subarray(n,n+h);e.texImage2D(r.face,m,d,u,f,0,p,v,o)})}else i===e.TEXTURE_3D?e.texImage3D(i,m,d,u,f,l,0,p,v,t):e.texImage2D(i,m,d,u,f,0,p,v,t);return b(e,n),{width:u,height:f,depth:l,type:v}}function C(e,r,t){var n=t.target||e.TEXTURE_2D;e.bindTexture(n,r);var o=t.level||0,i=t.internalFormat||t.format||e.RGBA,u=a(i),f=t.format||u.format,l=t.type||u.type;if(y(e,t),n===e.TEXTURE_CUBE_MAP)for(var s=0;s<6;++s)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,o,i,t.width,t.height,0,f,l,null);else n===e.TEXTURE_3D?e.texImage3D(n,o,i,t.width,t.height,t.depth,0,f,l,null):e.texImage2D(n,o,i,t.width,t.height,0,f,l,null);b(e,t)}function L(e,r,t){t=t||P,r=r||Y.textureOptions;var n=e.createTexture(),o=r.target||e.TEXTURE_2D,i=r.width||1,u=r.height||1,f=r.internalFormat||e.RGBA,l=a(f),s=r.type||l.type;e.bindTexture(o,n),o===e.TEXTURE_CUBE_MAP&&(e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var c=r.src;if(c)if("function"==typeof c&&(c=c(e,r)),"string"==typeof c)w(e,n,r,t);else if(V(c)||Array.isArray(c)&&("number"==typeof c[0]||Array.isArray(c[0])||V(c[0]))){var m=O(e,n,c,r);i=m.width,u=m.height,s=m.type}else if(Array.isArray(c)&&"string"==typeof c[0])o===e.TEXTURE_CUBE_MAP?I(e,n,r,t):S(e,n,r,t);else{if(!(c instanceof HTMLElement))throw"unsupported src type";h(e,n,c,r),i=c.width,u=c.height}else C(e,n,r);return F(r)&&x(e,n,r,i,u,f,s),p(e,n,r),n}function M(e,r,t,n,o){n=n||t.width,o=o||t.height;var i=t.target||e.TEXTURE_2D;e.bindTexture(i,r);var u=t.level||0,f=t.internalFormat||t.format||e.RGBA,l=a(f),c=t.format||l.format,m=void 0,d=t.src;if(m=d&&(V(d)||Array.isArray(d)&&"number"==typeof d[0])?t.type||s(e,d,l.type):t.type||l.type,i===e.TEXTURE_CUBE_MAP)for(var y=0;y<6;++y)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,u,f,n,o,0,c,m,null);else e.texImage2D(i,u,f,n,o,0,c,m,null)}function D(e){return"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]}function N(e,r,t){function n(){0===o&&setTimeout(function(){t(a.length?a:void 0,i,u)},0)}t=t||P;var o=0,a=[],i={},u={};return Object.keys(r).forEach(function(t){var f=r[t],l=void 0;D(f.src)&&(l=function(e,r,i){u[t]=i,--o,e&&a.push(e),n()},++o),i[t]=L(e,f,l)}),n(),i}Object.defineProperty(r,"__esModule",{value:!0}),r.getBytesPerElementForInternalFormat=r.getNumComponentsForFormat=r.resizeTexture=r.createTextures=r.setDefaultTextureColor=r.setTextureParameters=r.setTextureFilteringForSize=r.setTextureFromElement=r.loadTextureFromUrl=r.setTextureFromArray=r.setEmptyTexture=r.createTexture=r.setSamplerParameters=r.createSamplers=r.createSampler=r.setTextureDefaults_=void 0;var z=t(3),k=n(z),G=t(1),X=n(G),j=t(0),W=n(j),Y={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},V=X.isArrayBuffer,K=document.createElement("canvas").getContext("2d"),H=6407,Z=33319,q={},$=q;$[6406]={a:1},$[6409]={a:1},$[6410]={a:2},$[H]={a:3},$[6408]={a:4},$[6403]={a:1},$[36244]={a:1},$[Z]={a:2},$[33320]={a:2},$[H]={a:3},$[36248]={a:3},$[6408]={a:4},$[36249]={a:4},$[6402]={a:1},$[34041]={a:2};var J={},Q=J;Q[6406]={e:6406,r:!0,t:!0,u:[1,2,2,4],type:[5121,5131,36193,5126]},Q[6409]={e:6409,r:!0,t:!0,u:[1,2,2,4],type:[5121,5131,36193,5126]},Q[6410]={e:6410,r:!0,t:!0,u:[2,4,4,8],type:[5121,5131,36193,5126]},Q[H]={e:H,r:!0,t:!0,u:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},Q[6408]={e:6408,r:!0,t:!0,u:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},Q[33321]={e:6403,r:!0,t:!0,u:1,type:5121},Q[36756]={e:6403,r:!1,t:!0,u:1,type:5120},Q[33325]={e:6403,r:!1,t:!0,u:[4,2],type:[5126,5131]},Q[33326]={e:6403,r:!1,t:!1,u:4,type:5126},Q[33330]={e:36244,r:!0,t:!1,u:1,type:5121},Q[33329]={e:36244,r:!0,t:!1,u:1,type:5120},Q[33332]={e:36244,r:!0,t:!1,u:2,type:5123},Q[33331]={e:36244,r:!0,t:!1,u:2,type:5122},Q[33334]={e:36244,r:!0,t:!1,u:4,type:5125},Q[33333]={e:36244,r:!0,t:!1,u:4,type:5124},Q[33323]={e:Z,r:!0,t:!0,u:2,type:5121},Q[36757]={e:Z,r:!1,t:!0,u:2,type:5120},Q[33327]={e:Z,r:!1,t:!0,u:[8,4],type:[5126,5131]},Q[33328]={e:Z,r:!1,t:!1,u:8,type:5126},Q[33336]={e:33320,r:!0,t:!1,u:2,type:5121},Q[33335]={e:33320,r:!0,t:!1,u:2,type:5120},Q[33338]={e:33320,r:!0,t:!1,u:4,type:5123},Q[33337]={e:33320,r:!0,t:!1,u:4,type:5122},Q[33340]={e:33320,r:!0,t:!1,u:8,type:5125},Q[33339]={e:33320,r:!0,t:!1,u:8,type:5124},Q[32849]={e:H,r:!0,t:!0,u:3,type:5121},Q[35905]={e:H,r:!1,t:!0,u:3,type:5121},Q[36194]={e:H,r:!0,t:!0,u:[3,2],type:[5121,33635]},Q[36758]={e:H,r:!1,t:!0,u:3,type:5120},Q[35898]={e:H,r:!1,t:!0,u:[12,6,4],type:[5126,5131,35899]},Q[35901]={e:H,r:!1,t:!0,u:[12,6,4],type:[5126,5131,35902]},Q[34843]={e:H,r:!1,t:!0,u:[12,6],type:[5126,5131]},Q[34837]={e:H,r:!1,t:!1,u:12,type:5126},Q[36221]={e:36248,r:!1,t:!1,u:3,type:5121},Q[36239]={e:36248,r:!1,t:!1,u:3,type:5120},Q[36215]={e:36248,r:!1,t:!1,u:6,type:5123},Q[36233]={e:36248,r:!1,t:!1,u:6,type:5122},Q[36209]={e:36248,r:!1,t:!1,u:12,type:5125},Q[36227]={e:36248,r:!1,t:!1,u:12,type:5124},Q[32856]={e:6408,r:!0,t:!0,u:4,type:5121},Q[35907]={e:6408,r:!0,t:!0,u:4,type:5121},Q[36759]={e:6408,r:!1,t:!0,u:4,type:5120},Q[32855]={e:6408,r:!0,t:!0,u:[4,2,4],type:[5121,32820,33640]},Q[32854]={e:6408,r:!0,t:!0,u:[4,2],type:[5121,32819]},Q[32857]={e:6408,r:!0,t:!0,u:4,type:33640},Q[34842]={e:6408,r:!1,t:!0,u:[16,8],type:[5126,5131]},Q[34836]={e:6408,r:!1,t:!1,u:16,type:5126},Q[36220]={e:36249,r:!0,t:!1,u:4,type:5121},Q[36238]={e:36249,r:!0,t:!1,u:4,type:5120},Q[36975]={e:36249,r:!0,t:!1,u:4,type:33640},Q[36214]={e:36249,r:!0,t:!1,u:8,type:5123},Q[36232]={e:36249,r:!0,t:!1,u:8,type:5122},Q[36226]={e:36249,r:!0,t:!1,u:16,type:5124},Q[36208]={e:36249,r:!0,t:!1,u:16,type:5125},Q[33189]={e:6402,r:!0,t:!1,u:[2,4],type:[5123,5125]},Q[33190]={e:6402,r:!0,t:!1,u:4,type:5125},Q[36012]={e:6402,r:!0,t:!1,u:4,type:5126},Q[35056]={e:34041,r:!0,t:!1,u:4,type:34042},Q[36013]={e:34041,r:!0,t:!1,u:4,type:36269},Object.keys(Q).forEach(function(e){var r=Q[e];if(r.bytesPerElementMap={},Array.isArray(r.u))r.u.forEach(function(e,t){var n=r.type[t];r.bytesPerElementMap[n]=e});else{var t=r.type;r.bytesPerElementMap[t]=r.u}});var ee={},re=window.WebGLSampler||function(){};r.setTextureDefaults_=d,r.createSampler=_,r.createSamplers=T,r.setSamplerParameters=v,r.createTexture=L,r.setEmptyTexture=C,r.setTextureFromArray=O,r.loadTextureFromUrl=w,r.setTextureFromElement=h,r.setTextureFilteringForSize=x,r.setTextureParameters=p,r.setDefaultTextureColor=m,r.createTextures=N,r.resizeTexture=M,r.getNumComponentsForFormat=l,r.getBytesPerElementForInternalFormat=o},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(6);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})})},function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function o(e){F.copyExistingProperties(e,g),T.setAttributeDefaults_(e),A.setTextureDefaults_(e)}function a(e,r){R.glEnumToString(e,0);var t=e.getExtension(r);if(t){var n={},o=h.exec(r)[1],a="_"+o;for(var i in t){var u=t[i],f="function"==typeof u,l=f?o:a,s=i;i.endsWith(l)&&(s=i.substring(0,i.length-l.length)),void 0!==e[s]?f||e[s]===u||F.warn(s,e[s],u,i):f?e[s]=function(e){return function(){return e.apply(t,arguments)}}(u):(e[s]=u,n[s]=u)}n.constructor={name:t.constructor.name},R.glEnumToString(n,0)}return t}function i(e){for(var r=0;r<P.length;++r)a(e,P[r])}function u(e,r){for(var t=["webgl","experimental-webgl"],n=null,o=0;o<t.length;++o)if(n=e.getContext(t[o],r)){g.addExtensionsToContext&&i(n);break}return n}function f(e,r){return u(e,r)}function l(e,r){for(var t=["webgl2","webgl","experimental-webgl"],n=null,o=0;o<t.length;++o)if(n=e.getContext(t[o],r)){g.addExtensionsToContext&&i(n);break}return n}function s(e,r){return l(e,r)}function c(e,r){r=r||1,r=Math.max(0,r);var t=e.clientWidth*r|0,n=e.clientHeight*r|0;return(e.width!==t||e.height!==n)&&(e.width=t,e.height=n,!0)}Object.defineProperty(r,"__esModule",{value:!0}),r.setDefaults=r.resizeCanvasToDisplaySize=r.getWebGLContext=r.getContext=r.addExtensionsToContext=void 0;var m=t(7);Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return m[e]}})});var d=t(8);Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return d[e]}})});var y=t(9);Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return y[e]}})});var b=t(2);Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return b[e]}})});var E=t(4);Object.keys(E).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return E[e]}})});var p=t(1);Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return p[e]}})});var v=t(3);Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return v[e]}})});var _=t(10);Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return _[e]}})});var T=n(m),A=n(E),x=t(0),F=n(x),R=n(v),g={addExtensionsToContext:!0},h=/^(.*?)_/,P=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];r.addExtensionsToContext=i,r.getContext=s,r.getWebGLContext=f,r.resizeCanvasToDisplaySize=c,r.setDefaults=o},function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function o(e){P.attribPrefix=e}function a(e){h.copyExistingProperties(e,P)}function i(e,r,t,n,o){e.bindBuffer(r,t),e.bufferData(r,n,o||e.STATIC_DRAW)}function u(e,r,t,n){if(r instanceof WebGLBuffer)return r;t=t||e.ARRAY_BUFFER;var o=e.createBuffer();return i(e,t,o,r,n),o}function f(e){return"indices"===e}function l(e){return e instanceof Int8Array||e instanceof Uint8Array}function s(e){return e===Int8Array||e===Uint8Array}function c(e){return e.length?e:e.data}function m(e,r){var t=void 0;if(t=U.test(e)?2:B.test(e)?4:3,r%t>0)throw"Can not guess numComponents for attribute '"+e+"'. Tried "+t+" but "+r+" values is not evenly divisible by "+t+". You should specify it.";return t}function d(e,r){return e.numComponents||e.size||m(r,c(e).length)}function y(e,r){if(R.isArrayBuffer(e))return e;if(R.isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});var t=e.type;return t||(t=f(r)?Uint16Array:Float32Array),new t(e.data)}function b(e,r){var t={};return Object.keys(r).forEach(function(n){if(!f(n)){var o=r[n],a=o.attrib||o.name||o.attribName||P.attribPrefix+n,i=void 0,c=void 0,b=void 0,E=void 0,p=void 0;if("number"==typeof o||"number"==typeof o.data){p=o.data||o;var v=o.type||Float32Array,_=p*v.BYTES_PER_ELEMENT;c=R.getGLTypeForTypedArrayType(v),b=void 0!==o.normalize?o.normalize:s(v),E=o.numComponents||o.size||m(n,p),i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,_,o.drawType||e.STATIC_DRAW)}else{var T=y(o,n);i=u(e,T,void 0,o.drawType),c=R.getGLTypeForTypedArray(T),b=void 0!==o.normalize?o.normalize:l(T),E=d(o,n),p=T.length}t[a]={buffer:i,numComponents:E,type:c,normalize:b,stride:o.stride||0,offset:o.offset||0,divisor:void 0===o.divisor?void 0:o.divisor,drawType:o.drawType}}}),e.bindBuffer(e.ARRAY_BUFFER,null),t}function E(e,r,t,n){t=y(t),void 0!==n?(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.bufferSubData(e.ARRAY_BUFFER,n,t)):i(e,e.ARRAY_BUFFER,r.buffer,t,r.drawType)}function p(e,r){return r===e.BYTE?1:r===e.UNSIGNED_BYTE?1:r===e.SHORT?2:r===e.UNSIGNED_SHORT?2:r===e.INT?4:r===e.UNSIGNED_INT?4:r===e.FLOAT?4:0}function v(e){for(var r=void 0,t=0;t<w.length&&!((r=w[t])in e);++t);ii===w.length&&(r=Object.keys(e)[0]);var n=e[r],o=c(n).length,a=d(n,r),i=o/a;if(o%a>0)throw"numComponents "+a+" not correct for length "+o;return i}function _(e,r){var t=void 0,n=void 0;for(n=0;n<w.length&&!((t=w[n])in r)&&!((t=P.attribPrefix+t)in r);++n);n===w.length&&(t=Object.keys(r)[0]);var o=r[t];e.bindBuffer(e.ARRAY_BUFFER,o.buffer);var a=e.getBufferParameter(e.ARRAY_BUFFER,e.BUFFER_SIZE);e.bindBuffer(e.ARRAY_BUFFER,null);var i=p(e,o.type),u=a/i,f=o.numComponents||o.size,l=u/f;if(l%1!=0)throw"numComponents "+f+" not correct for length "+length;return l}function T(e,r){var t={attribs:b(e,r)},n=r.indices;if(n){var o=y(n,"indices");t.indices=u(e,o,e.ELEMENT_ARRAY_BUFFER),t.numElements=o.length,t.elementType=R.getGLTypeForTypedArray(o)}else t.numElements=_(e,t.attribs);return t}function A(e,r,t){var n="indices"===t?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;return u(e,y(r,t),n)}function x(e,r){var t={};return Object.keys(r).forEach(function(n){t[n]=A(e,r[n],n)}),r.indices?(t.numElements=r.indices.length,t.elementType=R.getGLTypeForTypedArray(y(r.indices),"indices")):t.numElements=v(r),t}Object.defineProperty(r,"__esModule",{value:!0}),r.getArray_=r.getNumComponents_=r.setAttributeDefaults_=r.setAttributePrefix=r.setAttribInfoBufferFromArray=r.createBufferInfoFromArrays=r.createBufferFromTypedArray=r.createBufferFromArray=r.createBuffersFromArrays=r.createAttribsFromArrays=void 0;var F=t(1),R=n(F),g=t(0),h=n(g),P={attribPrefix:""},U=/coord|texture/i,B=/color|colour/i,w=["position","positions","a_position"];r.createAttribsFromArrays=b,r.createBuffersFromArrays=x,r.createBufferFromArray=A,r.createBufferFromTypedArray=u,r.createBufferInfoFromArrays=T,r.setAttribInfoBufferFromArray=E,r.setAttributePrefix=o,r.setAttributeDefaults_=a,r.getNumComponents_=d,r.getArray_=c},function(e,r,t){"use strict";function n(e,r,t,n,o,a){t=void 0===t?e.TRIANGLES:t;var i=r.indices,u=r.elementType,f=void 0===n?r.numElements:n;o=void 0===o?0:o,u||i?void 0!==a?e.drawElementsInstanced(t,f,void 0===u?e.UNSIGNED_SHORT:r.elementType,o,a):e.drawElements(t,f,void 0===u?e.UNSIGNED_SHORT:r.elementType,o):void 0!==a?e.drawArraysInstanced(t,o,f,a):e.drawArrays(t,o,f)}function o(e,r){var t=null,o=null;r.forEach(function(r){if(!1!==r.active){var a=r.programInfo,u=r.vertexArrayInfo||r.bufferInfo,f=!1,l=void 0===r.type?e.TRIANGLES:r.type;a!==t&&(t=a,e.useProgram(a.program),f=!0),(f||u!==o)&&(o&&o.vertexArrayObject&&!u.vertexArrayObject&&e.bindVertexArray(null),o=u,i.setBuffersAndAttributes(e,a,u)),i.setUniforms(a,r.uniforms),n(e,u,l,r.count,r.offset,r.instanceCount)}}),o.vertexArrayObject&&e.bindVertexArray(null)}Object.defineProperty(r,"__esModule",{value:!0}),r.drawObjectList=r.drawBufferInfo=void 0;var a=t(2),i=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(a);r.drawBufferInfo=n,r.drawObjectList=o},function(e,r,t){"use strict";function n(e){return m[e]}function o(e){return d[e]}function a(e,r,t,a){var i=e.FRAMEBUFFER,u=e.createFramebuffer();e.bindFramebuffer(i,u),t=t||e.drawingBufferWidth,a=a||e.drawingBufferHeight,r=r||c;var f=0,m={framebuffer:u,attachments:[],width:t,height:a};return r.forEach(function(r){var u=r.attachment,c=r.format,d=n(c);if(d||(d=s+f++),!u)if(o(c))u=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,u),e.renderbufferStorage(e.RENDERBUFFER,c,t,a);else{var y=Object.assign({},r);y.width=t,y.height=a,void 0===y.auto&&(y.auto=!1,y.min=y.min||y.minMag||e.LINEAR,y.mag=y.mag||y.minMag||e.LINEAR,y.wrapS=y.wrapS||y.wrap||e.CLAMP_TO_EDGE,y.wrapT=y.wrapT||y.wrap||e.CLAMP_TO_EDGE),u=l.createTexture(e,y)}if(u instanceof WebGLRenderbuffer)e.framebufferRenderbuffer(i,d,e.RENDERBUFFER,u);else{if(!(u instanceof WebGLTexture))throw"unknown attachment type";e.framebufferTexture2D(i,d,r.texTarget||e.TEXTURE_2D,u,r.level||0)}m.attachments.push(u)}),m}function i(e,r,t,n,o){n=n||e.drawingBufferWidth,o=o||e.drawingBufferHeight,r.width=n,r.height=o,t=t||c,t.forEach(function(t,a){var i=r.attachments[a],u=t.format;if(i instanceof WebGLRenderbuffer)e.bindRenderbuffer(e.RENDERBUFFER,i),e.renderbufferStorage(e.RENDERBUFFER,u,n,o);else{if(!(i instanceof WebGLTexture))throw"unknown attachment type";l.resizeTexture(e,i,t,n,o)}})}function u(e,r,t){t=t||e.FRAMEBUFFER,r?(e.bindFramebuffer(t,r.framebuffer),e.viewport(0,0,r.width,r.height)):(e.bindFramebuffer(t,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}Object.defineProperty(r,"__esModule",{value:!0}),r.resizeFramebufferInfo=r.createFramebufferInfo=r.bindFramebufferInfo=void 0;var f=t(4),l=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(f),s=36064,c=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],m={};m[34041]=33306,m[6401]=36128,m[36168]=36128,m[6402]=36096,m[33189]=36096;var d={};d[32854]=!0,d[32855]=!0,d[36194]=!0,d[34041]=!0,d[33189]=!0,d[6401]=!0,d[36168]=!0,r.bindFramebufferInfo=u,r.createFramebufferInfo=a,r.resizeFramebufferInfo=i},function(e,r,t){"use strict";function n(e,r,t){var n=e.createVertexArray();return e.bindVertexArray(n),r.length||(r=[r]),r.forEach(function(r){u.setBuffersAndAttributes(e,r,t)}),e.bindVertexArray(null),{numElements:t.numElements,elementType:t.elementType,vertexArrayObject:n}}function o(e,r,t,n){var o=e.createVertexArray();return e.bindVertexArray(o),u.setAttributes(r,t),n&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bindVertexArray(null),o}function a(e,r,t){return o(e,r.attribSetters||r,t.attribs,t.indices)}Object.defineProperty(r,"__esModule",{value:!0}),r.createVAOFromBufferInfo=r.createVAOAndSetAttributes=r.createVertexArrayInfo=void 0;var i=t(2),u=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(i);r.createVertexArrayInfo=n,r.createVAOAndSetAttributes=o,r.createVAOFromBufferInfo=a}])});